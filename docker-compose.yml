services:
  client:
    build:
      context: ./client
      dockerfile: Dockerfile
    ports:
      - "${CLIENT_PORT}:${CLIENT_PORT}"
    env_file:
      - ./client/.env.production
    environment:
      - PORT=${CLIENT_PORT}
    depends_on:
      - server
      - board-server
  server:
    build:
      context: ./server
      dockerfile: Dockerfile
    ports:
      - "${SERVER_PORT}:${SERVER_PORT}"
    env_file:
      - ./server/.env.production
    environment:
      - GO_ENV=production
      - DOCKER_ENV=true
  board-server:
    build:
      context: ./board-server
      dockerfile: Dockerfile
    ports:
      - "${BOARD_SERVER_PORT}:${BOARD_SERVER_PORT}"
    env_file:
      - ./board-server/.env.production
    environment:
      - GO_ENV=production
      - DOCKER_ENV=true
